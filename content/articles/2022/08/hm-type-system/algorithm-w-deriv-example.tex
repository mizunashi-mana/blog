\documentclass[12pt]{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{ascmac}
\usepackage{mathtools}
\usepackage{ebproof}

\setlength{\paperwidth}{120cm}
\setlength{\paperheight}{30cm}

\input{layout.tex}

\begin{document}
\pagestyle{empty}

\[
    \begin{prooftree}
        \infer0{\mathbf{fresh} \beta_1}
        \infer0{\mathcal{W}(x: \beta_1, x) = (\emptyset, \beta_1)}
        \infer2{\mathcal{W}(\emptyset, \lambda x\ldotp x) = (\emptyset, \beta_1 \to \beta_1)}
        \infer0{\mathbf{fresh} \beta_2}
        \infer1{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, \mathit{id}) = (\emptyset, \beta_2 \to \beta_2)}
        \infer0{\mathbf{fresh} \beta_3}
        \infer0{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, x: \beta_3, x) = (\emptyset, \beta_3)}
        \infer2{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, \lambda x\ldotp x) = (\emptyset, \beta_3 \to \beta_3)}
        \infer0{\mathbf{fresh} \beta_4}
        \infer0{\mathcal{U}(\beta_2 \to \beta_2, (\beta_3 \to \beta_3) \to \beta_4) = S_1}
        \infer4{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, \mathit{id}\;(\lambda x\ldotp x)) = (S_1 = \{\beta_2 \mapsto \beta_3 \to \beta_3, \beta_4 \mapsto \beta_3 \to \beta_3\}, \beta_3 \to \beta_3)}
        \infer0{\mathbf{fresh} \beta_5}
        \infer1{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, \mathit{id}) = (\emptyset, \beta_5 \to \beta_5)}
        \infer0{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, \text{\texttt{()}}) = (\emptyset, \mathbf{unit})}
        \infer0{\mathbf{fresh} \beta_6}
        \infer0{\mathcal{U}(\beta_5 \to \beta_5, \mathbf{unit} \to \beta_6) = S_2}
        \infer4{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, \mathit{id}\;\text{\texttt{()}}) = (S_2 = \{\beta_5 \mapsto \mathbf{unit}, \beta_6 \mapsto \mathbf{unit}\}, \mathbf{unit})}
        \infer0{\mathbf{fresh} \beta_7}
        \infer0{\mathcal{U}(\beta_3 \to \beta_3, \mathbf{unit} \to \beta_7) = S_3}
        \infer4{\mathcal{W}(\mathit{id}: \forall \alpha\ldotp \alpha \to \alpha, (\mathit{id}\;(\lambda x\ldotp x))\;(\mathit{id}\;\text{\texttt{()}})) = (S_3S_2S_1 = \{\beta_2 \mapsto \mathbf{unit} \to \mathbf{unit}, \beta_3 \mapsto \mathbf{unit}, \beta_4 \mapsto \mathbf{unit} \to \mathbf{unit}, \beta_5 \mapsto \mathbf{unit}, \beta_6 \mapsto \mathbf{unit}, \beta_7 \mapsto \mathbf{unit}\}, \mathbf{unit})}
        \infer2{\mathcal{W}(\emptyset, \mathbf{let}\;\mathit{id} = \lambda x\ldotp x\; \mathbf{in}\; (\mathit{id}\;(\lambda x\ldotp x))\;(\mathit{id}\;\text{\texttt{()}})) = (S_3S_2S_1, \mathbf{unit})}
    \end{prooftree}
\]
\end{document}
